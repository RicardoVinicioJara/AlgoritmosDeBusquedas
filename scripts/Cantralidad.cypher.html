<html>
<head>
<title>Cantralidad.cypher</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #a9b7c6;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Cantralidad.cypher</font>
</center></td></tr></table>
<pre><span class="s0">//Bace de datos</span>
<span class="s2">CREATE </span><span class="s1">(</span><span class="s3">a</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Ecuador'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">b</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Manta'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">c</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Santo Domingo'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">d</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Babahoyo'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">e</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Latacunga'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">f</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Otavalo'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colegios'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesias'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Restaurants'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">j</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'UPC'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">l</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Unidad Educativa General Eloy Alfaro'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">m</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colegio Republica de Manta'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">n</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colegio Bahia de Manta'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">o</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colegio Manta'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">p</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colegio Tarqui Manta'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">q</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Unidad Educativa Maria Auxiliadora'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">r</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Unidad Educativa Fiscal Pedro Baldo Cucalon'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">s</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Central'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">t</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Dios es Amor'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">u</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'El buen Pastor'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">v</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Tercer camino'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">w</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Rey de Vida'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">x</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Bautista de la Fe'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">y</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Iglesia Santo Hermano Miguel'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">z</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Encebollado Don Bolo'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">aa</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Club de Nutricion'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">bb</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Picateria el Garaje'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">cc</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Don Fercho'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">dd</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Llapingacho don Pio'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">ee</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Caleta Bar y Grill'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">ff</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Colombia Pizza'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">gg</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Upc'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">hh</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'UPC San Felipe'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">ii</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'UPC Cdla San Francisco'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">jj</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'UPC Comunitaria'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">qq</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque Otavalo'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">kk</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque Condor'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">ll</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque Cascada de Peguche'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">ss</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque San Sebastian'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">tt</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque de los Dinosaurios'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">uu</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque Rumiñahui'</span><span class="s1">})</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">vv</span><span class="s1">:</span><span class="s2">Node </span><span class="s1">{</span><span class="s3">id</span><span class="s1">: </span><span class="s4">'Parque Simon Bolivar'</span><span class="s1">})</span><span class="s2">,</span>

       <span class="s1">(</span><span class="s3">a</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">b</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">a</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">c</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">a</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">d</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">a</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">e</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">a</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">f</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">b</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">g</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">c</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">h</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">d</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">i</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">e</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">j</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">f</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">k</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">l</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">m</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">n</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">o</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">p</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">q</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">g</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">r</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">s</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">t</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">u</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">v</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">w</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">x</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">h</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">y</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">z</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">aa</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">bb</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">cc</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">dd</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">ee</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">i</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">ff</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">j</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">gg</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">j</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">hh</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">j</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">ii</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">j</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">jj</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">qq</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">kk</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">ll</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">ss</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">tt</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">uu</span><span class="s1">)</span><span class="s2">,</span>
       <span class="s1">(</span><span class="s3">k</span><span class="s1">)-[:</span><span class="s3">LINK</span><span class="s1">]-&gt;(</span><span class="s3">vv</span><span class="s1">)</span>

<span class="s0">//Ver cuales son los nodos mas centrales</span>
<span class="s2">CALL </span><span class="s3">gds</span><span class="s1">.</span><span class="s3">alpha</span><span class="s1">.</span><span class="s3">closeness</span><span class="s1">.</span><span class="s3">stream</span><span class="s1">({</span>
  <span class="s3">nodeProjection</span><span class="s1">:         </span><span class="s4">'Node'</span><span class="s2">,</span>
  <span class="s3">relationshipProjection</span><span class="s1">: </span><span class="s4">'LINK'</span>
<span class="s1">})</span>
<span class="s2">YIELD </span><span class="s3">nodeId</span><span class="s2">, </span><span class="s3">centrality</span>
<span class="s2">RETURN </span><span class="s3">gds</span><span class="s1">.</span><span class="s3">util</span><span class="s1">.</span><span class="s3">asNode</span><span class="s1">(</span><span class="s3">nodeId</span><span class="s1">).</span><span class="s3">id </span><span class="s2">AS </span><span class="s3">user</span><span class="s2">, </span><span class="s3">centrality</span>
  <span class="s2">ORDER BY </span><span class="s3">centrality </span><span class="s2">DESC</span>

<span class="s0">//Si queiero calcular cuantos de mis nodos son centrales</span>
<span class="s2">CALL </span><span class="s3">gds</span><span class="s1">.</span><span class="s3">alpha</span><span class="s1">.</span><span class="s3">closeness</span><span class="s1">.</span><span class="s3">write</span><span class="s1">({</span>
  <span class="s3">nodeProjection</span><span class="s1">:         </span><span class="s4">'Node'</span><span class="s2">,</span>
  <span class="s3">relationshipProjection</span><span class="s1">: </span><span class="s4">'LINK'</span><span class="s2">,</span>
  <span class="s3">writeProperty</span><span class="s1">:          </span><span class="s4">'centrality'</span>
<span class="s1">}) </span><span class="s2">YIELD </span><span class="s3">nodes</span><span class="s2">, </span><span class="s3">writeProperty</span></pre>
</body>
</html>