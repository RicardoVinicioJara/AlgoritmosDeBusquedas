<html>
<head>
<title>mismacomunidad.cypher</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #a9b7c6;}
.s3 { color: #808080;}
.s4 { color: #6a8759;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
mismacomunidad.cypher</font>
</center></td></tr></table>
<pre><span class="s0">MATCH </span><span class="s1">(</span><span class="s2">n</span><span class="s1">)</span>
<span class="s0">OPTIONAL MATCH </span><span class="s1">(</span><span class="s2">n</span><span class="s1">)-[</span><span class="s2">r</span><span class="s1">]-()</span>
<span class="s0">DELETE </span><span class="s2">n</span><span class="s0">, </span><span class="s2">r</span>
<span class="s3">//Bace de Datos</span>
<span class="s0">CREATE </span><span class="s1">(</span><span class="s2">a</span><span class="s1">:</span><span class="s2">Pais </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Ecuador'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">1</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">b</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Manta'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">c</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Santo Domingo'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">d</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Babahoyo'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">e</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Latacunga'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">f</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Otavalo'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">g</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegios'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">h</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesias'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">i</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Restaurants'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">j</span><span class="s1">:</span><span class="s2">UPC </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'UPC'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">5</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">k</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">l</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Unnamead Educativa General Eloy Alfaro'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">m</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegio Republica de Manta'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">n</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegio Bahia de Manta'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">o</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegio Manta'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">p</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegio Tarqui Manta'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">q</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Unnamead Educativa Maria Auxiliadora'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">r</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Unnamead Educativa Fiscal Pedro Baldo Cucalon'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">2</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">s</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Central'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">t</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Dios es Amor'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">u</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'El buen Pastor'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">v</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Tercer camino'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">w</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Rey de Vnamea'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">x</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Bautista de la Fe'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">y</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Iglesia Santo Hermano Miguel'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">3</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">z</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Encebollado Don Bolo'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">aa</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Club de Nutricion'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">bb</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Picateria el Garaje'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">cc</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Don Fercho'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">dd</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Llapingacho don Pio'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">ee</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Caleta Bar y Grill'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">ff</span><span class="s1">:</span><span class="s2">Restaurant </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colombia Pizza'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">4</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">gg</span><span class="s1">:</span><span class="s2">UPC </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Upc'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">5</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">hh</span><span class="s1">:</span><span class="s2">UPC </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'UPC San Felipe'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">5</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">ii</span><span class="s1">:</span><span class="s2">UPC </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'UPC Cdla San Francisco'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">5</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">jj</span><span class="s1">:</span><span class="s2">UPC </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'UPC Comunitaria'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">5</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">qq</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Otavalo'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">kk</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Condor'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">ll</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Cascada de Peguche'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">ss</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque San Sebastian'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">tt</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque de los Dinosaurios'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">uu</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Rumiñahui'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span><span class="s0">,</span>
       <span class="s1">(</span><span class="s2">vv</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Simon Bolivar'</span><span class="s0">, </span><span class="s2">community</span><span class="s1">: </span><span class="s5">6</span><span class="s1">})</span>

<span class="s3">//Ver si pertenecen a la misma comunida</span>
<span class="s3">//Para un si</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p1</span><span class="s1">:</span><span class="s2">Ciudad </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Otavalo'</span><span class="s1">})</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p2</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Parque Otavalo'</span><span class="s1">})</span>
<span class="s0">RETURN </span><span class="s2">gds</span><span class="s1">.</span><span class="s2">alpha</span><span class="s1">.</span><span class="s2">linkprediction</span><span class="s1">.</span><span class="s2">sameCommunity</span><span class="s1">(</span><span class="s2">p1</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">) </span><span class="s0">AS </span><span class="s2">Puntaje</span>

<span class="s3">//Para un No</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p1</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Babahoyo'</span><span class="s1">})</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p2</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{</span><span class="s2">name</span><span class="s1">: </span><span class="s4">'Colegio Republica de Manta'</span><span class="s1">})</span>
<span class="s0">RETURN </span><span class="s2">gds</span><span class="s1">.</span><span class="s2">alpha</span><span class="s1">.</span><span class="s2">linkprediction</span><span class="s1">.</span><span class="s2">sameCommunity</span><span class="s1">(</span><span class="s2">p1</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">) </span><span class="s0">AS </span><span class="s2">Puntaje</span>

<span class="s3">//Colegios</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p1</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{})</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p2</span><span class="s1">:</span><span class="s2">Colegio </span><span class="s1">{})</span>
<span class="s0">RETURN </span><span class="s2">gds</span><span class="s1">.</span><span class="s2">alpha</span><span class="s1">.</span><span class="s2">linkprediction</span><span class="s1">.</span><span class="s2">sameCommunity</span><span class="s1">(</span><span class="s2">p1</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">) </span><span class="s0">AS </span><span class="s2">Puntaje</span><span class="s0">, </span><span class="s2">p1</span><span class="s1">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">.</span><span class="s2">name</span>

<span class="s3">//Parque iglesias</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p1</span><span class="s1">:</span><span class="s2">Parque </span><span class="s1">{})</span>
<span class="s0">MATCH </span><span class="s1">(</span><span class="s2">p2</span><span class="s1">:</span><span class="s2">Iglesia </span><span class="s1">{})</span>
<span class="s0">RETURN </span><span class="s2">gds</span><span class="s1">.</span><span class="s2">alpha</span><span class="s1">.</span><span class="s2">linkprediction</span><span class="s1">.</span><span class="s2">sameCommunity</span><span class="s1">(</span><span class="s2">p1</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">) </span><span class="s0">AS </span><span class="s2">Puntaje</span><span class="s0">, </span><span class="s2">p1</span><span class="s1">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">p2</span><span class="s1">.</span><span class="s2">name</span></pre>
</body>
</html>